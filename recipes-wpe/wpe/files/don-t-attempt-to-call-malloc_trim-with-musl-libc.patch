From c99039393ac54d8b2ec6cd6ad6094ac0c16ce67b Mon Sep 17 00:00:00 2001
From: Andre McCurdy <armccurdy@gmail.com>
Date: Wed, 18 Nov 2015 18:59:25 -0800
Subject: [PATCH] don't attempt to call malloc_trim() with musl libc

---
 Source/WebCore/platform/linux/MemoryPressureHandlerLinux.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/Source/WebCore/platform/linux/MemoryPressureHandlerLinux.cpp b/Source/WebCore/platform/linux/MemoryPressureHandlerLinux.cpp
index ea61909..51d0fcb 100644
--- a/Source/WebCore/platform/linux/MemoryPressureHandlerLinux.cpp
+++ b/Source/WebCore/platform/linux/MemoryPressureHandlerLinux.cpp
@@ -201,8 +201,10 @@ void MemoryPressureHandler::respondToMemoryPressure(Critical critical, Synchrono
 
 void MemoryPressureHandler::platformReleaseMemory(Critical)
 {
+#if defined (__GLIBC__)
     ReliefLogger log("Run malloc_trim");
     malloc_trim(0);
+#endif
 }
 
 void MemoryPressureHandler::ReliefLogger::platformLog()
-- 
1.9.1

